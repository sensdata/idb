# iDB

**åŸºäº Go è¯­è¨€æ„å»ºçš„è½»é‡çº§è‡ªæ‰˜ç®¡è¿ç»´å¹³å°**  
ä¸ºå¼€å‘è€…å’Œå°å‹å›¢é˜Ÿè€Œè®¾è®¡ï¼šä¸€ç«™å¼æœåŠ¡å™¨ç®¡ç†ä¸æ•°æ®åº“å¿«é€Ÿéƒ¨ç½²å·¥å…·

[![License](https://img.shields.io/badge/license-Apache%202.0-green.svg)](LICENSE)
[![Docker Pulls](https://img.shields.io/docker/pulls/sensdb/idb)](https://hub.docker.com/r/sensdb/idb)

---

## âœ¨ ç‰¹æ€§

### æœåŠ¡å™¨ç®¡ç†
- **ç³»ç»Ÿç›‘æ§**ï¼šå®æ—¶æŸ¥çœ‹ CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰èµ„æºå ç”¨
- **è¿›ç¨‹ç®¡ç†**ï¼šæŸ¥çœ‹å’Œç®¡ç†ç³»ç»Ÿè¿›ç¨‹
- **æ–‡ä»¶ç®¡ç†**ï¼šæµè§ˆå™¨å¼æ–‡ä»¶ç®¡ç†ï¼Œæ”¯æŒä¸Šä¼ ã€ä¸‹è½½ã€ç¼–è¾‘ã€å‹ç¼©ç­‰æ“ä½œ
- **æœåŠ¡ç®¡ç†**ï¼šç®¡ç†ç³»ç»ŸæœåŠ¡ï¼Œæ”¯æŒå¯åŠ¨ã€åœæ­¢ã€é‡å¯ç­‰æ“ä½œ

### ç½‘ç»œä¸å®‰å…¨
- **é˜²ç«å¢™ç®¡ç†**ï¼šåŸºäº nftables çš„é˜²ç«å¢™é…ç½®
- **SSH ç®¡ç†**ï¼šSSH é…ç½®ã€å¯†é’¥ç®¡ç†ã€ç™»å½•æ—¥å¿—
- **è¯ä¹¦ç®¡ç†**ï¼šç”Ÿæˆå’Œç®¡ç† SSL/TLS è¯ä¹¦

### å®¹å™¨ç®¡ç†
- **Docker ç®¡ç†**ï¼šå®¹å™¨ã€é•œåƒã€ç½‘ç»œã€å·çš„å®Œæ•´ç®¡ç†
- **Docker Compose**ï¼šæ”¯æŒ Docker Compose åº”ç”¨ç®¡ç†
- **ä¸€é”®éƒ¨ç½²**ï¼šå¿«é€Ÿéƒ¨ç½² MySQLã€PostgreSQLã€Redis ç­‰å¸¸ç”¨æœåŠ¡

### å·¥å…·é›†
- **æ—¥å¿—ç®¡ç†**ï¼šæ—¥å¿—æŸ¥çœ‹ã€æœç´¢ã€å®æ—¶è·Ÿè¸ª
- **è®¡åˆ’ä»»åŠ¡**ï¼šå®šæ—¶ä»»åŠ¡ç®¡ç†
- **å‘½ä»¤ç»ˆç«¯**ï¼šWeb ç»ˆç«¯ï¼Œæ”¯æŒå¤šä¸»æœºåˆ‡æ¢
- **æ–‡ä»¶åŒæ­¥**ï¼šåŸºäº rsync çš„æ–‡ä»¶åŒæ­¥åŠŸèƒ½

### å¤šä¸»æœºç®¡ç†
- **ç»Ÿä¸€ç®¡ç†**ï¼šæ”¯æŒç®¡ç†å¤šå°æœåŠ¡å™¨
- **è·¨ä¸»æœºæ“ä½œ**ï¼šæ”¯æŒè·¨æœåŠ¡å™¨çš„æ–‡ä»¶ä¼ è¾“ã€å‘½ä»¤æ‰§è¡Œ

---

## ğŸ“¦ å®‰è£…

### ä¸€é”®å®‰è£…
```bash
sudo curl -fsSL https://static.sensdata.com/idb/release/install.sh | sudo bash

```

### Docker å®‰è£…
```bash
docker run -d \
  --name idb \
  --privileged \
  -p 9918:9918 \
  -v /var/lib/idb:/var/lib/idb \
  -v /var/run/docker.sock:/var/run/docker.sock \
  sensdb/idb
```

### æ‰‹åŠ¨å®‰è£…

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/sensdata/idb.git
cd idb
```

2. ç¼–è¯‘å‰ç«¯
```bash
cd frontend
npm install
npm run build
cd ..
```

3. ç¼–è¯‘åç«¯
```bash
cd center
make build
```

4. å®‰è£…
```bash
make install
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

1. **è®¿é—®æ§åˆ¶å°**
   - å®‰è£…å®Œæˆåï¼Œè®¿é—® `http://your-server-ip:9918`
   - é»˜è®¤ç”¨æˆ·åï¼š`admin`ï¼Œå¯†ç ï¼š`admin123`

2. **æ·»åŠ æœåŠ¡å™¨**
   - ç™»å½•åï¼Œç‚¹å‡»å·¦ä¾§èœå•æ çš„ã€Œä¸»æœºç®¡ç†ã€
   - ç‚¹å‡»ã€Œæ·»åŠ ä¸»æœºã€ï¼Œå¡«å†™æœåŠ¡å™¨ä¿¡æ¯
   - é€‰æ‹©å®‰è£…æ–¹å¼ï¼ˆä¸€é”®å®‰è£…æˆ–æ‰‹åŠ¨å®‰è£…ï¼‰

3. **ç®¡ç†æœåŠ¡å™¨**
   - æœåŠ¡å™¨æ·»åŠ æˆåŠŸåï¼Œå³å¯åœ¨æ§åˆ¶å°ä¸­ç®¡ç†è¯¥æœåŠ¡å™¨
   - ç‚¹å‡»æœåŠ¡å™¨å¡ç‰‡ï¼Œè¿›å…¥æœåŠ¡å™¨è¯¦æƒ…é¡µé¢
   - å¯æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ã€ç®¡ç†è¿›ç¨‹ã€æ–‡ä»¶ã€æœåŠ¡ç­‰

4. **éƒ¨ç½²åº”ç”¨**
   - ç‚¹å‡»å·¦ä¾§èœå•æ çš„ã€Œåº”ç”¨å¸‚åœºã€
   - é€‰æ‹©è¦éƒ¨ç½²çš„åº”ç”¨ï¼ˆå¦‚ MySQLï¼‰
   - å¡«å†™é…ç½®ä¿¡æ¯ï¼Œç‚¹å‡»ã€Œéƒ¨ç½²ã€

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
idb/
â”œâ”€â”€ agent/           # Agent å®¢æˆ·ç«¯ä»£ç 
â”‚   â”œâ”€â”€ agent/       # Agent æ ¸å¿ƒå®ç°
â”‚   â”œâ”€â”€ config/      # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ db/          # æœ¬åœ°æ•°æ®åº“
â”‚   â””â”€â”€ main.go      # Agent å…¥å£
â”œâ”€â”€ center/          # Center æœåŠ¡å™¨ä»£ç 
â”‚   â”œâ”€â”€ config/      # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ core/        # æ ¸å¿ƒåŠŸèƒ½å®ç°
â”‚   â”œâ”€â”€ db/          # æ•°æ®åº“æ¨¡å‹å’Œä»“åº“
â”‚   â”œâ”€â”€ plugin/      # æ’ä»¶ç³»ç»Ÿ
â”‚   â””â”€â”€ main.go      # Center å…¥å£
â”œâ”€â”€ core/            # å…¬å…±åº“å’Œå®šä¹‰
â”‚   â”œâ”€â”€ constant/    # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ model/       # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ utils/       # å·¥å…·å‡½æ•°
â”œâ”€â”€ frontend/        # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/         # å‰ç«¯æºç 
â”‚   â””â”€â”€ package.json # å‰ç«¯ä¾èµ–
â”œâ”€â”€ LICENSE          # è®¸å¯è¯æ–‡ä»¶
â””â”€â”€ README.md        # é¡¹ç›®è¯´æ˜
```

---

## ğŸ”§ å¼€å‘ç¯å¢ƒ

### åç«¯å¼€å‘

1. **ç¯å¢ƒè¦æ±‚**
   - Go 1.23+ 

2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   cd center
   go run main.go start
   ```

### å‰ç«¯å¼€å‘

1. **ç¯å¢ƒè¦æ±‚**
   - Node.js 18+ 
   - npm æˆ– yarn

2. **å®‰è£…ä¾èµ–**
   ```bash
   cd frontend
   npm install
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

---

## ğŸ¤ è´¡çŒ®

### å¦‚ä½•è´¡çŒ®

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### å¼€å‘è§„èŒƒ

- ä»£ç é£æ ¼ï¼šéµå¾ª Go å®˜æ–¹ä»£ç é£æ ¼
- æäº¤ä¿¡æ¯ï¼šæ¸…æ™°ã€ç®€æ´ï¼Œä½¿ç”¨è‹±æ–‡
- æµ‹è¯•ï¼šä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
- æ–‡æ¡£ï¼šæ›´æ–°ç›¸å…³æ–‡æ¡£

### ä»£ç ç»“æ„

- æ–°å¢åŠŸèƒ½è¯·éµå¾ªç°æœ‰ä»£ç ç»“æ„
- æ ¸å¿ƒåŠŸèƒ½æ·»åŠ åˆ° `core/` ç›®å½•
- æœåŠ¡å™¨åŠŸèƒ½æ·»åŠ åˆ° `center/` ç›®å½•
- å®¢æˆ·ç«¯åŠŸèƒ½æ·»åŠ åˆ° `agent/` ç›®å½•

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache License 2.0 è®¸å¯è¯ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ“š æ–‡æ¡£

- [API æ–‡æ¡£](http://your-server-ip:9918/api/v1/swagger/index.html)
- [æ¶æ„è®¾è®¡](docs/architecture.md)
- [æ’ä»¶å¼€å‘æŒ‡å—](docs/plugin-development.md)
- [å¸¸è§é—®é¢˜](docs/faq.md)

---

## ğŸ“¬ è”ç³»

- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/sensdata/idb/issues)
- è®¨è®ºäº¤æµï¼š[GitHub Discussions](https://github.com/sensdata/idb/discussions)

---

## ğŸ“Š æ•°æ®

- **Docker ä¸‹è½½é‡**ï¼š1 ä¸‡+
- **æ”¯æŒç³»ç»Ÿ**ï¼šUbuntuã€Debianã€CentOSã€Rocky Linuxã€Kylinã€UnionTech ç­‰
- **äº‘å¹³å°æ”¯æŒ**ï¼šAWSã€Azureã€Google Cloudã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ã€UCloud ç­‰

---

## ğŸ”— ç›¸å…³é“¾æ¥

- [Docker Hub](https://hub.docker.com/r/sensdb/idb)
- [GitHub](https://github.com/sensdata/idb)

---

**æ„Ÿè°¢ä½¿ç”¨ iDBï¼** ğŸ‰